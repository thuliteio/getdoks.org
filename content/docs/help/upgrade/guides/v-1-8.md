---
title: "Doks v1.8"
description: "This guide will help you migrate from Doks v1.7 to Doks v1.8."
summary: "This guide will help you migrate from Doks v1.7 to Doks v1.8."
date: 2025-08-01T10:24:33+02:00
lastmod: 2025-08-01T10:24:33+02:00
draft: false
weight: 840
toc: true
seo:
  title: "" # custom title (optional)
  description: "" # custom description (recommended)
  canonical: "" # custom canonical URL (optional)
  robots: "" # custom robot tags (optional)
---

{{< callout context="note" title="Note" icon="outline/info-circle" >}}
Doks v1.8 is an update for the [new template system in Hugo v0.146.0](https://gohugo.io/templates/new-templatesystem-overview/). Make sure you have the [latest Hugo extended version](https://github.com/gohugoio/hugo/releases/latest) installed.
{{< /callout >}}

## Clean dependencies

Delete the current lock file and dependencies installed to avoid conflicts.

```bash
npx shx rm -rf node_modules package-lock.json pnpm-lock.yaml yarn.lock bun.lock
```

## Update `package.json`

Replace the contents of your project's `package.json` with the following:

```json {title="package.json"}
{
  "name": "doks",
  "version": "1.8.0",
  "description": "Doks theme",
  "author": "Thulite",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/thuliteio/doks.git"
  },
  "scripts": {
    "create": "hugo new",
    "dev": "hugo server --disableFastRender --noHTTPCache",
    "format": "prettier **/** -w -c",
    "build": "hugo --minify --gc",
    "preview": "vite preview --outDir public"
  },
  "dependencies": {
    "@thulite/doks-core": "^1.8.3",
    "@thulite/images": "^3.3.1",
    "@thulite/inline-svg": "^1.2.0",
    "@thulite/seo": "^2.4.1",
    "@tabler/icons": "^3.34.1",
    "thulite": "^2.6.3"
  },
  "devDependencies": {
    "prettier": "^3.6.2",
    "vite": "^7.0.6"
  },
  "engines": {
    "node": ">=20.11.0"
  },
  "publishConfig": {
    "access": "public",
    "registry": "https://registry.npmjs.org/"
  }
}
```

## Install dependencies

Install the new dependencies.

{{< tabs "install-doks" >}}
{{< tab "npm" >}}

```bash
npm install
```

{{< /tab >}}
{{< tab "pnpm" >}}

```bash
pnpm install
```

{{< /tab >}}
{{< tab "Yarn" >}}

```bash
yarn install
```

{{< /tab >}}
{{< tab "bun" >}}

```bash
bun install
```

{{< /tab >}}
{{< /tabs >}}

## Configure Doks

### Update site configuration

Update the following settings in `config/_default/hugo.toml`:

```toml {title="hugo.toml"}
# Delete or comment out canonifyURLs and paginate
# canonifyURLs = false
# paginate = 10

# Add pagination.pagerSize â€” at the bottom to avoid conflicts
[pagination]
  pagerSize = 10
```

### Update mounts

Replace the (default) mounts configuration in `config/_default/module.toml` with:

{{< details "Mounts" >}}

```toml {title="module.toml" lineNos=false}
# Module Configuration File
#
# This file configures Hugo module settings, particularly module mounts which
# define how content is organized within the project.
#
# Mounts specify file paths in your project that Hugo should use when building
# the site. They allow for custom directory structures and integrating content
# from different locations.

## content
[[mounts]]
  source = "content"
  target = "content"

## data
[[mounts]]
  source = "node_modules/@thulite/doks-core/data"
  target = "data"

[[mounts]]
  source = "data"
  target = "data"

## layouts
[[mounts]]
  source = "layouts"
  target = "layouts"

[[mounts]]
  # Exclude 'home.html' to avoid conflicts with a custom home page layout defined in the local 'layouts' directory.
  excludeFiles = "home.html"
  source = "node_modules/@thulite/doks-core/layouts"
  target = "layouts"

[[mounts]]
  source = "node_modules/@thulite/core/layouts"
  target = "layouts"

[[mounts]]
  source = "node_modules/@thulite/seo/layouts"
  target = "layouts"

[[mounts]]
  source = "node_modules/@thulite/images/layouts"
  target = "layouts"

[[mounts]]
  source = "node_modules/@thulite/inline-svg/layouts"
  target = "layouts"

## i18n
[[mounts]]
  source = "node_modules/@thulite/doks-core/i18n"
  target = "i18n"

[[mounts]]
  source = "i18n"
  target = "i18n"

## archetypes
[[mounts]]
  source = "node_modules/@thulite/doks-core/archetypes"
  target = "archetypes"

[[mounts]]
  source = "archetypes"
  target = "archetypes"

## assets
[[mounts]]
  source = "node_modules/@thulite/core/assets"
  target = "assets"

[[mounts]]
  source = "node_modules/@thulite/doks-core/assets"
  target = "assets"

[[mounts]]
  source = "node_modules/@tabler/icons/icons"
  target = "assets/svgs/tabler-icons"

[[mounts]]
  source = "node_modules/@thulite/images/assets"
  target = "assets"

[[mounts]]
  source = "assets"
  target = "assets"

## static
[[mounts]]
  source = "node_modules/@thulite/doks-core/static"
  target = "static"

[[mounts]]
  source = "static"
  target = "static"
```

{{< /details >}}

### Update PostCSS settings

Replace the (default) settings in `config/postcss.config.js` with:

{{< details "PostCSS" >}}

```js {title=postcss.config.js lineNos=true hl_lines=[2,8]}
const autoprefixer = require('autoprefixer');
const { purgeCSSPlugin } = require('@fullhuman/postcss-purgecss');
const whitelister = require('purgecss-whitelister');

module.exports = {
    plugins: [
        autoprefixer(),
        purgeCSSPlugin({
            content: ['./hugo_stats.json'],
            extractors: [
                {
                    extractor: (content) => {
                        const els = JSON.parse(content).htmlElements;
                        return els.tags.concat(els.classes, els.ids);
                    },
                    extensions: ['json']
                }
            ],
            dynamicAttributes: [
                'aria-expanded',
                'data-bs-popper',
                'data-bs-target',
                'data-bs-theme',
                'data-dark-mode',
                'data-global-alert',
                'data-pane', // tabs.js
                'data-popper-placement',
                'data-sizes',
                'data-toggle-tab', // tabs.js
                'id',
                'size',
                'type'
            ],
            safelist: [
                'active',
                'btn-clipboard', // clipboards.js
                'clipboard', // clipboards.js
                'disabled',
                'hidden',
                'modal-backdrop', // search-modal.js
                'selected', // search-modal.js
                'show',
                'img-fluid',
                'blur-up',
                'lazyload',
                'lazyloaded',
                'alert-link',
                'container-fw ',
                'container-lg',
                'container-fluid',
                'offcanvas-backdrop',
                'figcaption',
                'dt',
                'dd',
                'showing',
                'hiding',
                'page-item',
                'page-link',
                'not-content',
                ...whitelister(['./assets/scss/**/*.scss', './node_modules/@thulite/doks-core/assets/scss/components/_code.scss', './node_modules/@thulite/doks-core/assets/scss/components/_expressive-code.scss', './node_modules/@thulite/doks-core/assets/scss/common/_syntax.scss'])
            ]
        })
    ]
};
```

{{< /details >}}

### Update Netlify settings

If you're using Netlify to deploy your site, update `netlify.toml`:

```toml
[build.environment]
  NODE_VERSION = "22.17.0"
  NPM_VERSION = "10.9.2"
  HUGO_VERSION = "0.148.2"
```

## Update layouts

In your project directory, rename the `layouts` files and folders according to the [new template system in Hugo v0.146.0](https://gohugo.io/templates/new-templatesystem-overview/). For example, rename `layouts/partials` to `layouts/_partials`, and rename `layouts/index.html` to `layouts/home.html`.
